# 프로젝트(주정차)

### DB 

#### 다른사람과 db 연동(외부 연결 위해서는)

1. 먼저 자신의 컴퓨터 이름을 알아야 한다. 고급시스템 설정에서 볼 수 있다.

2. C:\app\student\product\11.2.0\dbhome_1\NETWORK\ADMIN

   - 이곳에 들어가면 listener가 있다. 메모장이나 편집기로 열어

   - ```
     # listener.ora Network Configuration File: C:\app\student\product\11.2.0\dbhome_1\network\admin\listener.ora
     # Generated by Oracle configuration tools.
     
     SID_LIST_LISTENER =
       (SID_LIST =
         (SID_DESC =
           (SID_NAME = CLRExtProc)
           (ORACLE_HOME = C:\app\student\product\11.2.0\dbhome_1)
           (PROGRAM = extproc)
           (ENVS = "EXTPROC_DLLS=ONLY:C:\app\student\product\11.2.0\dbhome_1\bin\oraclr11.dll")
         )
       )
     
     LISTENER =
       (DESCRIPTION_LIST =
         (DESCRIPTION =
           (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
           (ADDRESS = (PROTOCOL = TCP)(HOST = )(PORT = 1521))
         )
       )
     
     ADR_BASE_LISTENER = C:\app\student
     ```

     위에서 protocol= Host 값에 위에서 찾은 컴퓨터 이름을 넣어 준다. 그 후 저장

3. cmd 창을 열어 `lsnrctl stop` 후에 `lsnrctl start' 해 주면 리스너 실행 완료

4. 그 후 sql 에 들어가연결하려는 새로운 접속을 해보자. 

5. 접속 호스트 이름은 나의 컴퓨터의 포트 번호인데 검색 방법은

   - cmd 창을 열고 ipconfig 입력
   - IPv4 의 주소를 입력해준다. 
   - 포트 번호의 위의 listener 안의 port번호를 확인 하자.

6. 만들어진 컴퓨터의 설정을 건드리면 되며 다른 컴퓨터에서는 그저 접속만 하면 된다.



## pyton

1. https://www.python.org/downloads/

- 여기에서 파이톤을 다운받는다. 
- 다운받을  시 경로 부분을 클릭하고 다운받도록 하자

2. 그 후 cmd 창을 열고 c: 에서 `pip install folium`  을 작성 설치를 마친다.
3. pip pandas 와 pip xlrd  또한 설치를 마치자.
4. python shell에 작성한다. (하긴 전 파일 준비 donData.xlsx와 geo_simple.json 파일 두개)

```python
import json
import folium
import pandas as pd 
import webbrowser
geo_path='C:/Users/student/Downloads/주정차/자료/busan/BuSan.json'
geo_str=json.load(open(geo_path,encoding='utf-8'))

dongData=pd.read_excel('C:/Users/student/Downloads/주정차/자료/busan/dongData.xlsx',heador=0)
for i in range(len(dongData)):
	dongData.loc[i,"dong"]=str(dongData.loc[i,"dong"])
	dongData


Busan_map=folium.Map(location=[35.148795, 128.982690],zoom_start=10.5,tiles='cartodbpositron')
Busan_map.choropleth(geo_data=geo_str,data=dongData,
columns=['dong','counts'],
fill_color='RdPu',
key_on='properties.EMD_CD',
highlight=True,
fill_opacity=0.5, line_opacity=1,
legend_name='countNum')

Busan_map.save('BS.html')
webbrowser.open_new("BS.html")
```

#### 지도 파일 변환(shp=> json)

1. https://mapshaper.org/ 로 접속
2. http://www.gisdeveloper.co.kr/wp-content/uploads/1/1406298632.zip 이걸 설치해준다. 
3. http://www.gisdeveloper.co.kr/?p=2332 여기에서 관련 파일을 다운로드
4. 위에 설치한 프로그램으로 변환한다(좌표계를 UTM-K 를 WGS84로) 파이썬의 folium은 WGS84를 인식하므로

![1564707599912](C:\Users\student\Documents\GitHub\javaStudy\사진\변환)

1. import 파일은 dbf, shp, shx 3가지 파일을 모두 넣어준다(encoding=euckr)
2. 조정 후
3. export 클릭
4. 확장자는 GeoJSON(precision=0.001 encoding=utf-8 )입력후 export 





```
//내 현재 위치
 function WhereMyPlace(){

	
	
	if (navigator.geolocation) {
	    
	    // GeoLocation을 이용해서 접속 위치를 얻어옵니다
	    navigator.geolocation.getCurrentPosition(function(position) {
	        
	        var lat = position.coords.latitude, // 위도
	            lon = position.coords.longitude; // 경도
	        
	        var locPosition = new kakao.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
	            message = '<div style="padding:5px;">현재위치</div>'; // 인포윈도우에 표시될 내용입니다
	        
	        // 마커와 인포윈도우를 표시합니다
	        displayMarker(locPosition, message);
	            
	      });
	    
	} else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
	    
	    var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
	        message = 'geolocation을 사용할수 없어요..'
	        
	    displayMarker(locPosition, message);
	}

	// 지도에 마커와 인포윈도우를 표시하는 함수입니다
	function displayMarker(locPosition, message) {

	    // 마커를 생성합니다
	    var marker = new kakao.maps.Marker({  
	        map: map, 
	        position: locPosition
	    }); 
	    
	    var iwContent = message, // 인포윈도우에 표시할 내용
	        iwRemoveable = true;

	    // 인포윈도우를 생성합니다
	    var infowindow = new kakao.maps.InfoWindow({
	        content : iwContent,
	        removable : iwRemoveable
	    });
	    
	    // 인포윈도우를 마커위에 표시합니다 
	    infowindow.open(map, marker);
	    
	    // 지도 중심좌표를 접속위치로 변경합니다
	    map.setCenter(locPosition);      
	}  
	

};
//내 현재위치 끝
```







### 주정차 즐겨찾기

지원하지않는 미디어 형식일시 오류가 뜨는 것이였어서

```jsp
kakao.maps.event.addListener(marker, 'click', function() {
	      // 마커 위에 인포윈도우를 표시합니다
	      infowindow.open(map, marker);  
	      var lat = marker.getPosition().getLat();
	      var lng = marker.getPosition().getLng();
	      console.log(lat);
	      console.log(lng);
	      var test = new kakao.maps.LatLng(lat, lng);
	      //test
	      let point = {
	    		  lat1 : lat,
	    		  lng1 : lng
	      }
	      
	      //test end
	      $.ajaxSettings.traditional = true;
	      $.ajax({
	          type: "POST",
	          contentType: 'application/json',
	          url : "<c:url value='/MyParkLo.do' />",
	          data : JSON.stringify(point),
	          contentType : "application/json",
	          dataType : "json",
	          success : function(data){
	              alert("성공");
	          },error : function(request,status,error){
	              //Ajax 실패시
	        	  alert("처리에 실패하였습니다.\ncode:"+request.status+"\n"+"error:"+error);
	           
	          }
	      });

	});
```



```java
@RequestMapping(value = "/MyParkLo.do")
	@ResponseBody
	public String defaultmap(@RequestBody Map<String,Object> point) {
		
		System.out.println(point.get("lat1"));
		
		return "{ \"status\" : 1 }";
	}
```





```
<mvc:annotation-driven>
    <mvc:message-converters>
        <!-- @ResponseBody Content-Type:application/json;charset=UTF-8  -->
        <bean class="org.springframework.http.converter.StringHttpMessageConverter">
            <property name="supportedMediaTypes">
                <list>
                    <value>text/html;charset=UTF-8</value>
                </list>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven>
```





## 총 정리

#### view

#### xml

#### java







비슷한 사이트

https://buvicar.busan.go.kr/park/sub0402.do#



## 불법 4대 주정차

![1564562473076](C:\Users\student\Documents\GitHub\javaStudy\사진\불법4대주정차)

1. 소화전
   - 주, 정차 금지 교통안전표시 설치 소화전 5M이내 정지 상태  차량
2. 교차로 모퉁이
   - 주, 정차 금지 규제표지 또는 노면표시가 설치된 교차로의 가장자리나 도로의 모퉁이에 정지 상태 차량
3. 버스정류소
   - 정류소 표지판 좌우 및 노면표시선 기준 10M이내 정지 상태 차량
4. 횡단보도
   - 횡단보도 위나 정지선을 침범한 정지 상태 차량

1분 이상 주정차 시 단속 대상



## 참고 사이트

https://mapshaper.org/

- 지도 확장자 변환 사이트
- https://blog.naver.com/kcchang61/221350672356 관련 설명은 이 곳을 참고하자.

https://www.juso.go.kr/info/RoadNameDataList.do?type=search&roadCd=&keyword=&city1=11&county1=710&town1=&searchType=0&extend=true

- 도로 변환등의 정보 제공 사이트

https://ericnjennifer.github.io/python_visualization/2018/01/21/PythonVisualization_Chapt6.html

- 파이썬 이용 방법

http://data.seoul.go.kr/dataList/datasetView.do?infId=OA-13226&srvType=M&serviceKind=1&currentPageNo=null

- 도로 실측& 서울 관련 데이터

https://d-hyeon.tistory.com/2

- 파이썬 이용의 많은 도움이 됨

https://m.blog.naver.com/PostView.nhn?blogId=estern&logNo=220617257332&proxyReferer=https%3A%2F%2Fwww.google.com%2F

- 파이썬 자바 연동 이것을 참고하자!(참고로 preference 에서  quick 이 없어졌으니 config to path?? 를 클릭하자)

[https://zetawiki.com/wiki/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8_onclick_%EC%9D%B4%EB%B2%A4%ED%8A%B8](https://zetawiki.com/wiki/자바스크립트_onclick_이벤트)

- 클릭이벤트 등록(input, button 일때)

크롬의 jsonView 는 json 파일 정렬에 좋다(편집기의 줄정렬도 나쁘지않다.)









1. 필요성
   - 가족끼리 다 같이 신나게 시장을 가게 됩니다. 시장 앞은 불법 주차된 차들로 꽉 꽉 막혀 있고    주차장도 보이지 않고 상황은 암담합니다. 그렇다고 아무곳이나 주차할수 없습니다. 이 상황에서 착안된 웹 서비스입니다.
2. 처음 구상
   - 처음 구상은 이렇게 됩니다. 
3. 시퀀스다이어그램과 현재 상황
4. 





